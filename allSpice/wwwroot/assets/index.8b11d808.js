var ye=Object.defineProperty;var G=Object.getOwnPropertySymbols;var be=Object.prototype.hasOwnProperty,we=Object.prototype.propertyIsEnumerable;var J=(i,e,n)=>e in i?ye(i,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[e]=n,C=(i,e)=>{for(var n in e||(e={}))be.call(e,n)&&J(i,n,e[n]);if(G)for(var n of G(e))we.call(e,n)&&J(i,n,e[n]);return i};import{r as xe,c as y,a as S,o as l,b as d,d as T,e as o,S as Q,f as ke,g,w as $,h as I,v as E,t as m,i as v,j as Ie,k as Ee,l as Se,m as Re,p as q,n as M,q as De,s as V,u as X,x as Z,y as H,z as b,T as Te,F as O,A as j,K as Ae,B as N,C as Ce,D as $e,E as Fe}from"./vendor.79e61492.js";const Pe=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))t(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const a of c.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&t(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerpolicy&&(c.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?c.credentials="include":r.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function t(r){if(r.ep)return;r.ep=!0;const c=n(r);fetch(r.href,c)}};Pe();const s=xe({user:{},account:{},recipes:[],activeRecipe:{},ingredients:[],steps:[],favorites:[],myFavorites:[],ingEdits:[],stepEdits:[]});var R=(i,e)=>{for(const[n,t]of e)i[n]=t;return i};const Oe={name:"App",setup(){return{appState:y(()=>s)}}},qe={class:"container-fluid full-page"},Me={class:"row"},je={class:"col-12"};function Le(i,e,n,t,r,c){const a=S("Navbar"),_=S("router-view");return l(),d("main",null,[T(a),o("div",qe,[o("div",Me,[o("div",je,[T(_)])])])])}var Ve=R(Oe,[["render",Le]]);class w{static async confirm(e="Are you sure?",n="You won't be able to revert this!",t="warning",r="Yes, delete it!"){try{return!!(await Q.fire({title:e,text:n,icon:t,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:r})).isConfirmed}catch{return!1}}static toast(e="Warning!",n="warning",t="top-end",r=3e3,c=!0){Q.fire({title:e,icon:n,position:t,timer:r,timerProgressBar:c,toast:!0,showConfirmButton:!1})}static error(e){var n;if(e.isAxiosError){const{response:t}=e;this.toast(((n=t.data.error)==null?void 0:n.message)||t.data.message,"error")}else this.toast(e.message||e,"error")}static success(e="Success!"){this.toast(e,"success")}}const ee=window.location.origin.includes("localhost"),te=ee?"https://localhost:5001":"",Ne="dev-nw8rrpf8.us.auth0.com",Ue="AawJXZhjMzi3kn1PlJl0roYxpoYd74E1",ze="http://dyldev.com",p=ke.create({baseURL:te,timeout:8e3});class Be{async getIngredients(e){const n=await p.get(`api/recipes/${e}/ingredients`);s.ingredients=n.data}async makeEdits(){await s.ingEdits.forEach(async n=>{const t=await p.put(`api/ingredients/${n.id}`,n);console.log(t.data);const r=s.ingredients.findIndex(c=>c.id==n.id);s.ingredients.splice(r,1,t.data)}),s.ingEdits=[],s.ingredients=s.ingredients}async createIngredient(e){const n=await p.post("api/ingredients",e);console.log(n.data),s.ingredients.push(n.data)}async deleteIngredient(e){const n=await p.delete(`api/ingredients/${e}`);console.log(n.data),s.ingredients=s.ingredients.filter(t=>t.id!==e)}}const U=new Be;function L(i,e){if(ee)console[i](`[${i}] :: ${new Date().toLocaleTimeString()} :: `,...e);else{switch(i){case"log":case"assert":return}console[i](`[${i}] :: ${new Date().toLocaleTimeString()} :: `,...e)}}const h={log(){L("log",arguments)},error(){L("error",arguments)},warn(){L("warn",arguments)},assert(){L("assert",arguments)},trace(){L("trace",arguments)}};const He={props:{ingredient:{type:Object,required:!0},editing:{type:Boolean,required:!0}},setup(i){const e=g();e.value=C({},i.ingredient);const n=g({});return $(()=>{if(n.value.name||(console.log("empty"),n.value=C({},e.value)),n.value.name!=e.value.name||n.value.quantity!=e.value.quantity){let t=s.ingEdits.find(r=>r.id==i.ingredient.id);(!t||t.name!=n.value.name&&t.quantity!=n.value.quantity)&&s.ingEdits.push(n.value)}i.editing==!1&&s.ingEdits.length&&(e.value=C({},n.value))}),{activeData:n,account:y(()=>s.account),async deleteIngredient(){try{this.account.id==i.ingredient.creatorId&&await U.deleteIngredient(i.ingredient.id)}catch(t){h.error(t),w.toast(t.message,"error")}}}}},Ke={key:0,class:"d-flex ingredientText"},Ye={key:1,class:"w-25"},We={key:3,class:"ms-3"},Ge={class:"on-hover"},Je={key:1,class:"d-flex ingredientText"},Qe={class:"ms-3"};function Xe(i,e,n,t,r,c){return l(),d("div",null,[t.account.id==n.ingredient.creatorId?(l(),d("div",Ke,[n.editing?I((l(),d("input",{key:0,type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>t.activeData.name=a)},null,512)),[[E,t.activeData.name,void 0,{trim:!0,lazy:!0}]]):(l(),d("span",Ye,m(t.activeData.name),1)),n.editing?I((l(),d("input",{key:2,type:"text","onUpdate:modelValue":e[1]||(e[1]=a=>t.activeData.quantity=a)},null,512)),[[E,t.activeData.quantity,void 0,{trim:!0,lazy:!0}]]):(l(),d("span",We,m(t.activeData.quantity),1)),o("div",Ge,[n.editing?(l(),d("i",{key:0,class:"rounded-circle mdi mdi-skull selectable",onClick:e[2]||(e[2]=(...a)=>t.deleteIngredient&&t.deleteIngredient(...a))})):v("",!0)])])):(l(),d("div",Je,[o("span",null,m(n.ingredient.name),1),o("span",Qe,m(n.ingredient.quantity),1)]))])}var ne=R(He,[["render",Xe],["__scopeId","data-v-bb50a75c"]]),ie=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ne});const Ze="modulepreload",oe={},et="/",k=function(e,n){return!n||n.length===0?e():Promise.all(n.map(t=>{if(t=`${et}${t}`,t in oe)return;oe[t]=!0;const r=t.endsWith(".css"),c=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${t}"]${c}`))return;const a=document.createElement("link");if(a.rel=r?"stylesheet":Ze,r||(a.as="script",a.crossOrigin=""),a.href=t,document.head.appendChild(a),r)return new Promise((_,u)=>{a.addEventListener("load",_),a.addEventListener("error",u)})})).then(()=>e())};function tt(i){switch(i){case"./components/Ingredient.vue":return k(()=>Promise.resolve().then(function(){return ie}),void 0);case"./components/Login.vue":return k(()=>Promise.resolve().then(function(){return le}),void 0);case"./components/Modal.vue":return k(()=>Promise.resolve().then(function(){return de}),void 0);case"./components/Navbar.vue":return k(()=>Promise.resolve().then(function(){return ue}),void 0);case"./components/Recipe.vue":return k(()=>Promise.resolve().then(function(){return ve}),void 0);case"./components/RecipeDetails.vue":return k(()=>Promise.resolve().then(function(){return pe}),void 0);case"./components/RecipeForm.vue":return k(()=>Promise.resolve().then(function(){return ge}),void 0);case"./components/RecipesFeed.vue":return k(()=>Promise.resolve().then(function(){return me}),void 0);case"./components/Step.vue":return k(()=>Promise.resolve().then(function(){return fe}),void 0);default:return new Promise(function(e,n){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(n.bind(null,new Error("Unknown variable dynamic import: "+i)))})}}function nt(i){switch(i){case"./pages/AboutPage.vue":return k(()=>import("./AboutPage.083153db.js"),["assets/AboutPage.083153db.js","assets/vendor.79e61492.js"]);case"./pages/AccountPage.vue":return k(()=>import("./AccountPage.3bc42ff2.js"),["assets/AccountPage.3bc42ff2.js","assets/AccountPage.1d38451d.css","assets/vendor.79e61492.js"]);case"./pages/HomePage.vue":return k(()=>import("./HomePage.8e51c718.js"),["assets/HomePage.8e51c718.js","assets/HomePage.5e3edf20.css","assets/vendor.79e61492.js"]);default:return new Promise(function(e,n){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(n.bind(null,new Error("Unknown variable dynamic import: "+i)))})}}function K(i){return()=>nt(`./pages/${i}.vue`)}function se(i){return()=>tt(`./components/${i}.vue`)}const it=[{path:"/",name:"Home",component:K("HomePage"),children:[{path:"/recipes",name:"AllRecipes",component:se("RecipesFeed"),meta:{showModal:!1}},{path:"/recipes/:recipeId/details",name:"RecipeDetails",component:se("RecipeDetails"),props:!0,meta:{showModal:!0}}]},{path:"/newRecipe",name:"New Recipe",component:K("RecipeForm")},{path:"/account",name:"Account",component:K("AccountPage"),beforeEnter:Se}],ae=Ie({linkActiveClass:"router-link-active",linkExactActiveClass:"router-link-exact-active",history:Ee(),routes:it});class ot{async getAccount(){try{const e=await p.get("/account");s.account=e.data}catch(e){h.error("HAVE YOU STARTED YOUR SERVER YET???",e)}}}const st=new ot;class at{async getMyFavorites(){const e=await p.get("account/favorites");s.myFavorites=e.data}async getFavoritesByRecipe(e){const n=await p.get(`api/recipes/${e}/favorites`);s.favorites=s.favorites.concat(n.data)}async addFavorite(e){const n=await p.post("api/favorites",e);s.favorites.push(n.data),s.myFavorites.push(n.data)}async removeFavorite(e){const n=await p.delete("api/favorites/"+e);return s.favorites=s.favorites.filter(t=>t.id!==e),s.myFavorites=s.favorites.filter(t=>t.id!==e),n.data}}const F=new at,rt={connection:"connection",connected:"connected",disconnect:"disconnect",authenticate:"authenticate",authenticated:"authenticated",userConnected:"userConnected",userDisconnected:"userDisconnected",error:"error"};class ct{constructor(e=!1,n=te){}on(e,n){var t;return(t=this.socket)==null||t.on(e,n.bind(this)),this}onConnected(e){h.log("[SOCKET_CONNECTION]",e),this.connected=!0,this.playback()}onAuthenticated(e){h.log("[SOCKET_AUTHENTICATED]",e),this.authenticated=!0,this.playback()}authenticate(e){var n;(n=this.socket)==null||n.emit(rt.authenticate,e)}onError(e){h.error("[SOCKET_ERROR]",e)}enqueue(e,n){h.log("[ENQUEING_ACTION]",{action:e,payload:n}),this.queue.push({action:e,payload:n})}playback(){h.log("[SOCKET_PLAYBACK]");const e=[...this.queue];this.queue=[],e.forEach(n=>{this.emit(n.action,n.payload)})}emit(e,n=void 0){if(this.requiresAuth&&!this.authenticated)return this.enqueue(e,n);if(!this.connected)return this.enqueue(e,n);this.socket.emit(e,n)}}class lt extends ct{constructor(){super();this.on("error",this.onError)}onError(e){w.toast(e.message,"error")}}const re=new lt,x=Re({domain:Ne,clientId:Ue,audience:ze,useRefreshTokens:!0,onRedirectCallback:i=>{ae.push(i&&i.targetUrl?i.targetUrl:window.location.pathname)}});x.on(x.AUTH_EVENTS.AUTHENTICATED,async function(){p.defaults.headers.authorization=x.bearer,p.interceptors.request.use(dt),s.user=x.user,await st.getAccount(),re.authenticate(x.bearer),await F.getMyFavorites()});async function dt(i){if(!x.isAuthenticated)return i;const e=x.identity.exp*1e3,n=e<Date.now(),t=e<Date.now()+1e3*60*60*12;return n?await x.loginWithPopup():t&&(await x.getTokenSilently(),p.defaults.headers.authorization=x.bearer,re.authenticate(x.bearer)),i}const ut={setup(){return{user:y(()=>s.user),account:y(()=>s.account),async login(){x.loginWithPopup()},async logout(){x.logout({returnTo:window.location.origin})}}}},ce=i=>(q("data-v-59ce884d"),i=i(),M(),i),_t={class:"navbar-text"},vt=ce(()=>o("i",{class:"mdi mdi-logout"},null,-1)),pt=[vt],gt=ce(()=>o("i",{class:"mdi mdi-logout"},null,-1)),mt=[gt];function ft(i,e,n,t,r,c){return l(),d("span",_t,[t.user.isAuthenticated?(l(),d("div",{key:1,class:"hoverable text-danger",onClick:e[1]||(e[1]=(...a)=>t.logout&&t.logout(...a))},mt)):(l(),d("div",{key:0,class:"hoverable text-success",onClick:e[0]||(e[0]=(...a)=>t.login&&t.login(...a))},pt))])}var ht=R(ut,[["render",ft],["__scopeId","data-v-59ce884d"]]),le=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ht});const yt={setup(){return{}}},bt={class:"myModal d-flex justify-content-center"},wt={class:"modalContainer d-flex flex-column bg-light rounded"};function xt(i,e,n,t,r,c){return l(),d("div",bt,[o("div",wt,[De(i.$slots,"modal-content-slot",{},void 0,!0)])])}var kt=R(yt,[["render",xt],["__scopeId","data-v-130b82c8"]]),de=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:kt});const It={setup(){return{}}},z=i=>(q("data-v-7e50f5fa"),i=i(),M(),i),Et={class:"w-100 d-flex justify-content-between bg-light align-items-start"},St=z(()=>o("div",null,[o("img",{class:"headline",src:"https://i.imgur.com/uD2hJ1s.png",alt:""})],-1)),Rt={class:"myNav bg-dark px-3 d-flex align-items-center"},Dt=z(()=>o("div",{class:"hoverable me-3"},[o("i",{class:"fa-solid fa-house-chimney"})],-1)),Tt=z(()=>o("div",{class:"hoverable me-3"},[o("i",{class:"fa-solid fa-kitchen-set"})],-1)),At={style:{position:"relative"},class:"me-3"},Ct=z(()=>o("button",{class:"fa-solid fa-plus",type:"button",id:"dropdownMenuButton","data-bs-toggle":"dropdown","data-bs-auto-close":"true","aria-expanded":"false"},null,-1)),$t={id:"dropdown-menu",class:"dropdown-menu formSize"};function Ft(i,e,n,t,r,c){const a=S("router-link"),_=S("RecipeForm"),u=S("Login");return l(),d("div",Et,[St,o("div",Rt,[T(a,{to:{name:"Home"}},{default:V(()=>[Dt]),_:1}),T(a,{to:{name:"Account"}},{default:V(()=>[Tt]),_:1}),o("div",At,[Ct,o("div",$t,[T(_)])]),T(u)])])}var Pt=R(It,[["render",Ft],["__scopeId","data-v-7e50f5fa"]]),ue=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Pt});class Ot{async getAllRecipes(){const e=await p.get("api/recipes");s.recipes=e.data}async createRecipe(e){const n=await p.post("api/recipes",e);console.log(n.data),s.recipes.unshift(n.data)}async deleteRecipe(e){const n=await p.delete(`api/recipes/${e}`);console.log(n.data),s.recipes=s.recipes.filter(t=>t.id!==e)}}const Y=new Ot;const qt={props:{recipe:{type:Object,required:!0}},setup(i){const e=X(),n=Z();H(async()=>{try{await F.getFavoritesByRecipe(i.recipe.id)}catch(c){h.error(c),w.toast(c.message,"error")}});let t=g(!1);$(()=>{if(s.recipes.length&&s.favorites.length){const c=s.favorites.find(a=>a.recipeId==i.recipe.id&&a.accountId==s.account.id);c&&(t.value=!0),c||(t.value=!1)}});let r=g();return $(()=>{e.params.recipeId==i.recipe.id&&(r.value=e.meta.showModal),e.name=="Home"&&(r.value=!1,s.activeRecipe={},s.ingredients=[],s.steps=[])}),{props:i,router:n,favorited:t,showModal:r,authenticated:y(()=>s.account.id==i.recipe.creatorId),account:y(()=>s.account),goToDetails(){try{n.push({name:"RecipeDetails",params:{recipeId:i.recipe.id}})}catch(c){h.error(c),w.toast(c.message,"error")}},async deleteRecipe(){try{await w.confirm()&&await Y.deleteRecipe(i.recipe.id)}catch(c){h.error(c),w.toast(c.message,"error")}},async toggleFavorite(){const c=s.favorites.find(a=>a.recipeId==i.recipe.id&&a.accountId==s.account.id);if(!c)await F.addFavorite({recipeId:i.recipe.id});else{const a=await F.removeFavorite(c.id);w.toast(a,"success","top-end",2e3,!1)}}}}},_e=i=>(q("data-v-e3fdca06"),i=i(),M(),i),Mt={class:"col-md-6"},jt=["src","alt"],Lt={class:"spiceContent d-flex flex-column p-3"},Vt={class:"mt-auto"},Nt=_e(()=>o("hr",null,null,-1)),Ut={class:"d-flex justify-content-between"},zt={class:"w-50 spiceInfo d-flex justify-content-end align-items-center"},Bt={class:"me-2"},Ht={key:0,class:"me-2"},Kt=_e(()=>o("div",{class:"d-flex justify-content-between mb-1"},null,-1));function Yt(i,e,n,t,r,c){const a=S("router-view"),_=S("Modal");return l(),d(O,null,[o("div",Mt,[o("div",{class:"spicebox d-flex flex-column rounded my-4",onClick:e[3]||(e[3]=b(u=>t.goToDetails(),["stop"]))},[o("img",{src:n.recipe.picture,alt:n.recipe.title,class:"spicePic rounded-top"},null,8,jt),o("div",Lt,[o("h5",null,m(n.recipe.title),1),o("h6",null,m(n.recipe.subtitle),1),o("div",Vt,[Nt,o("div",Ut,[o("span",null,m(n.recipe.creator.name),1),o("div",zt,[o("span",Bt,m(n.recipe.category),1),t.account.id?(l(),d("div",Ht,[t.favorited?(l(),d("i",{key:0,class:"mdi mdi-heart selectable",style:{color:"rgb(191, 17, 17)"},onClick:e[0]||(e[0]=b((...u)=>t.toggleFavorite&&t.toggleFavorite(...u),["stop"]))})):v("",!0),t.favorited?v("",!0):(l(),d("i",{key:1,class:"mdi mdi-heart-outline selectable",onClick:e[1]||(e[1]=b((...u)=>t.toggleFavorite&&t.toggleFavorite(...u),["stop"]))}))])):v("",!0),t.authenticated?(l(),d("i",{key:1,class:"mdi mdi-delete selectable",onClick:e[2]||(e[2]=b((...u)=>t.deleteRecipe&&t.deleteRecipe(...u),["stop"]))})):v("",!0)]),Kt])])])])]),T(Te,{name:"modalFade"},{default:V(()=>[(l(),j(Ae,null,[t.showModal?(l(),j(_,{key:0},{"modal-content-slot":V(()=>[T(a,{recipe:n.recipe},null,8,["recipe"])]),_:1})):v("",!0)],1024))]),_:1})],64)}var Wt=R(qt,[["render",Yt],["__scopeId","data-v-e3fdca06"]]),ve=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Wt});class Gt{async getSteps(e){let t=(await p.get(`api/recipes/${e}/steps`)).data.sort((r,c)=>r.position-c.position);s.steps=t}async makeEdits(){await s.stepEdits.forEach(async n=>{const t=await p.put(`api/steps/${n.id}`,n);console.log(t.data);const r=s.steps.findIndex(c=>c.id==n.id);s.steps.splice(r,1,t.data)}),s.stepEdits=[],s.steps=s.steps}async createStep(e){const n=await p.post("api/steps",e);console.log(n.data),s.steps.push(n.data)}async deleteStep(e){const n=await p.delete(`api/steps/${e}`);console.log(n.data),s.steps=s.steps.filter(t=>t.id!==e)}}const B=new Gt;const Jt={components:{Ingredient:ne},inheritAttrs:!1,name:"RecipeDetails",props:{recipe:{type:Object,required:!0}},setup(i){const e=X(),n=Z(),t=g(!1),r=g(!1),c=g(!1),a=g(!1),_=g(!1),u=g({}),P=g({});return $(()=>{const f=s.favorites.find(A=>A.accountId==s.account.id&&A.accountId==s.account.id);f&&(_.value=!0),f||(_.value=!1)}),H(async()=>{await F.getFavoritesByRecipe(e.params.recipeId),await U.getIngredients(e.params.recipeId),await B.getSteps(e.params.recipeId),a.value=!0}),{props:i,route:e,router:n,loaded:a,editing:t,creatingIng:r,creatingStep:c,stepData:u,ingData:P,favorited:_,ingredients:y(()=>s.ingredients),steps:y(()=>s.steps),account:y(()=>s.account),authenticated:y(()=>s.account.id==i.recipe.creatorId),closeModal(){try{n.go(-1)}catch{n.push({name:"Home"})}},async toggleFavorite(){const f=s.favorites.find(A=>A.recipeId==i.recipe.id&&A.accountId==s.account.id);if(!f)await F.addFavorite({recipeId:i.recipe.id});else{const A=await F.removeFavorite(f.id);w.toast(A,"success","top-end",2e3,!1)}},async handleEdit(){t.value=!t.value;try{if(!s.stepEdits.length&&!s.ingEdits.length)return;t.value==!1&&s.ingEdits.length&&await U.makeEdits(),t.value==!1&&s.stepEdits.length&&await B.makeEdits()}catch(f){h.error(f),w.toast(f.message,"error")}},async newStep(){try{u.value.recipeId=e.params.recipeId,u.value.creatorId=this.account.id,console.log(u.value),await B.createStep(u.value),u.value={}}catch(f){h.error(f),w.toast(f.message,"error")}},async newIngredient(){try{P.value.recipeId=e.params.recipeId,P.value.creatorId=this.account.id,console.log(P.value),await U.createIngredient(P.value),P.value={}}catch(f){h.error(f),w.toast(f.message,"error")}}}}},D=i=>(q("data-v-613cfc98"),i=i(),M(),i),Qt={class:"coverImg rounded-top"},Xt={class:"buttonBox d-flex flex-column align-items-center"},Zt={class:"body bg-light"},en={class:"d-flex justify-content-between"},tn={class:"w-65 p-4"},nn=D(()=>o("hr",{class:"w-35"},null,-1)),on={class:"d-flex w-35 p-4"},sn={class:"ms-auto"},an={class:"container-fluid"},rn={class:"row"},cn=D(()=>o("div",{class:"col-12"},[o("div",{class:"whitespacer"})],-1)),ln={class:"col-12 d-flex justify-content-end"},dn={class:"d-flex lighten rounded-circle p-1"},un=D(()=>o("hr",null,null,-1)),_n={class:"row"},vn={class:"col-md-5"},pn={class:"h-100 bg-light rounded p-2"},gn=D(()=>o("h4",null,"Ingredients",-1)),mn={id:"newIngredient",class:"d-flex"},fn=D(()=>o("label",{for:""},null,-1)),hn=D(()=>o("label",{for:""},null,-1)),yn={key:2,type:"submit",style:{display:"none"}},bn={class:"col-md-5"},wn={class:"h-100 bg-light rounded p-2"},xn=D(()=>o("h4",null,"Steps",-1)),kn={id:"newStep",class:"d-flex"},In=D(()=>o("label",{for:""},null,-1)),En=D(()=>o("label",{for:""},null,-1)),Sn={key:2,type:"submit",style:{display:"none"}},Rn=D(()=>o("div",{class:"row"},[o("div",{class:"col-12"},[o("div",{class:"whitespacer"})])],-1));function Dn(i,e,n,t,r,c){const a=S("Ingredient"),_=S("Step");return l(),d("div",{class:"detailsContent rounded",style:Ce({"background-image":`url(${n.recipe.picture})`})},[o("div",Qt,[o("div",Xt,[o("i",{id:"close",class:"mdi mdi-close selectable text-center rounded-circle mb-2",onClick:e[0]||(e[0]=b((...u)=>t.closeModal&&t.closeModal(...u),["stop"]))}),t.favorited?(l(),d("i",{key:0,class:"fav mdi mdi-heart selectable",onClick:e[1]||(e[1]=b((...u)=>t.toggleFavorite&&t.toggleFavorite(...u),["stop"]))})):v("",!0),!t.favorited&&t.account.id?(l(),d("i",{key:1,class:"fav mdi mdi-heart-outline selectable",onClick:e[2]||(e[2]=b((...u)=>t.toggleFavorite&&t.toggleFavorite(...u),["stop"]))})):v("",!0)])]),o("div",Zt,[o("div",en,[o("div",tn,[o("h1",null,m(n.recipe.title),1),nn,o("h4",null,m(n.recipe.subtitle),1)]),o("div",on,[o("h5",sn,m(n.recipe.category),1)])])]),o("div",an,[o("div",rn,[cn,o("div",ln,[o("div",dn,[t.authenticated?(l(),d("i",{key:0,class:"mdi mdi-pencil selectable rounded-circle p-1",onClick:e[3]||(e[3]=b((...u)=>t.handleEdit&&t.handleEdit(...u),["stop"]))})):v("",!0)])])]),un,o("div",_n,[o("div",vn,[o("div",pn,[gn,(l(!0),d(O,null,N(t.ingredients,u=>(l(),j(a,{class:"",key:u.id,ingredient:u,editing:t.editing},null,8,["ingredient","editing"]))),128)),t.editing?(l(),d("i",{key:0,class:"mdi mdi-plus bg-danger rounded-circle selectable",onClick:e[4]||(e[4]=b(u=>t.creatingIng=!t.creatingIng,["stop"]))})):v("",!0),o("form",{onSubmit:e[7]||(e[7]=b(u=>t.newIngredient(),["prevent"]))},[o("div",mn,[fn,t.creatingIng&&t.editing?I((l(),d("input",{key:0,type:"text","onUpdate:modelValue":e[5]||(e[5]=u=>t.ingData.name=u),required:""},null,512)),[[E,t.ingData.name]]):v("",!0),hn,t.creatingIng&&t.editing?I((l(),d("input",{key:1,type:"text",style:{width:"5vw"},"onUpdate:modelValue":e[6]||(e[6]=u=>t.ingData.quantity=u),required:""},null,512)),[[E,t.ingData.quantity]]):v("",!0),t.creatingIng&&t.editing?(l(),d("button",yn)):v("",!0)])],32)])]),o("div",bn,[o("div",wn,[xn,(l(!0),d(O,null,N(t.steps,u=>(l(),j(_,{class:"",key:u.id,step:u,editing:t.editing},null,8,["step","editing"]))),128)),t.editing?(l(),d("i",{key:0,class:"mdi mdi-plus bg-danger rounded-circle h-25 selectable",onClick:e[8]||(e[8]=b(u=>t.creatingStep=!t.creatingStep,["stop"]))})):v("",!0),o("form",{onSubmit:e[11]||(e[11]=b(u=>t.newStep(),["prevent"]))},[o("div",kn,[In,t.creatingStep&&t.editing?I((l(),d("input",{key:0,type:"number",min:"0",style:{width:"3vw"},"onUpdate:modelValue":e[9]||(e[9]=u=>t.stepData.position=u),required:""},null,512)),[[E,t.stepData.position,void 0,{trim:!0}]]):v("",!0),En,t.creatingStep&&t.editing?I((l(),d("textarea",{key:1,class:"w-100","onUpdate:modelValue":e[10]||(e[10]=u=>t.stepData.body=u),required:""},null,512)),[[E,t.stepData.body,void 0,{trim:!0}]]):v("",!0),t.creatingStep&&t.editing?(l(),d("button",Sn)):v("",!0)])],32)])])]),Rn])],4)}var Tn=R(Jt,[["render",Dn],["__scopeId","data-v-613cfc98"]]),pe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Tn});const An={setup(){const i=g({});H(async()=>{await Y.getAllRecipes()});let e=g([]);return $(()=>{if(s.recipes.length){let n=[];s.recipes.forEach(t=>{n.includes(t.category)||n.push(t.category)}),n.sort(),e.value=n}}),{formData:i,categories:e,async createRecipe(){try{if(!i.value.category)throw new Error("You have to choose a category");await Y.createRecipe(i.value),i.value={}}catch(n){h.error(n),w.toast(n.message,"error")}}}}},Cn={class:"recipeForm"},$n={class:"container-fluid"},Fn={class:"row"},Pn={class:"col-md-6"},On=o("label",{for:"recipe-title"},"Title: ",-1),qn={class:"col-md-6"},Mn=o("label",{for:"recipe-img"},"Image: ",-1),jn={class:"row d-flex align-items-end"},Ln={class:"col-md-6"},Vn=o("label",{for:"recipe-subtitle"},"Subtitle: ",-1),Nn={class:"col-md-6 d-flex justify-content-center"},Un={class:"btn-group-vertical w-100",role:"group","aria-label":""},zn={class:"btn-group",role:"group"},Bn={id:"dropdownId",type:"button",class:"btn btn-light dropdown-toggle","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},Hn={class:"dropdown-menu","aria-labelledby":"dropdownId"},Kn=["onClick"],Yn=o("hr",null,null,-1),Wn={class:"row"},Gn={class:"col-12"},Jn={class:"w-100 d-flex justify-content-start"},Qn=o("button",{class:"btn btn-info me-2",type:"submit"},"Submit",-1);function Xn(i,e,n,t,r,c){return l(),d("div",Cn,[o("form",{onSubmit:e[4]||(e[4]=b(a=>t.createRecipe(),["prevent"]))},[o("div",$n,[o("div",Fn,[o("div",Pn,[On,I(o("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>t.formData.title=a),name:"recipe-title",id:"",required:"",maxlength:"50"},null,512),[[E,t.formData.title]])]),o("div",qn,[Mn,I(o("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=a=>t.formData.picture=a),name:"recipe-img",id:"",required:""},null,512),[[E,t.formData.picture]])])]),o("div",jn,[o("div",Ln,[Vn,I(o("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=a=>t.formData.subtitle=a),name:"recipe-subtitle",id:"",required:"",maxlength:"255"},null,512),[[E,t.formData.subtitle]])]),o("div",Nn,[o("div",Un,[o("div",zn,[o("button",Bn,m(t.formData.category?t.formData.category:"Category"),1),o("div",Hn,[(l(!0),d(O,null,N(t.categories,a=>(l(),d("a",{key:a,class:"dropdown-item selectable",onClick:_=>t.formData.category=a},m(a),9,Kn))),128))])])])])]),Yn,o("div",Wn,[o("div",Gn,[o("div",Jn,[Qn,o("button",{class:"btn btn-light",onClick:e[3]||(e[3]=a=>t.formData={})}," Close ")])])])])],32)])}var Zn=R(An,[["render",Xn]]),ge=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Zn});const ei={setup(){const i=g(""),e=g([]);return $(()=>{let n=s.recipes;if(i.value&&s.myFavorites.length){if(i.value=="favorited"){let t=s.myFavorites,r=[];t.forEach(c=>{c.recipe.creator=s.account,r.push(c.recipe)}),n=r}i.value=="mine"&&(n=n.filter(t=>t.creatorId==s.account.id))}e.value=n}),{filter:i,filteredRecipes:e,recipes:y(()=>s.recipes),account:y(()=>s.account)}}},W=i=>(q("data-v-00ee1d1a"),i=i(),M(),i),ti={class:"row d-flex justify-content-end"},ni={class:"col-4"},ii={key:0,class:"filterbar d-flex justify-content-around align-items-center rounded"},oi=W(()=>o("h6",null,"Favorited",-1)),si=[oi],ai=W(()=>o("h6",{class:""},"My Recipes",-1)),ri=[ai],ci=W(()=>o("h6",null,"All",-1)),li=[ci],di={class:"row"};function ui(i,e,n,t,r,c){const a=S("Recipe");return l(),d(O,null,[o("div",ti,[o("div",ni,[t.account.id?(l(),d("div",ii,[o("div",{class:"p-2 d-flex align-items-center justify-content-center selectable text-center filter",onClick:e[0]||(e[0]=_=>t.filter="favorited")},si),o("div",{class:"p-2 d-flex align-items-center justify-content-center selectable text-center filter",onClick:e[1]||(e[1]=_=>t.filter="mine")},ri),o("div",{class:"p-2 d-flex align-items-center justify-content-center selectable text-center filter",onClick:e[2]||(e[2]=_=>t.filter="")},li)])):v("",!0)])]),o("div",di,[(l(!0),d(O,null,N(t.filteredRecipes,_=>(l(),j(a,{key:_.id,recipe:_},null,8,["recipe"]))),128))])],64)}var _i=R(ei,[["render",ui],["__scopeId","data-v-00ee1d1a"]]),me=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:_i});const vi={props:{step:{type:Object,required:!0},editing:{type:Boolean,required:!0}},setup(i){const e=g();e.value=C({},i.step);const n=g({});return $(()=>{if(n.value.body||(n.value=C({},e.value)),n.value.body!=e.value.body||n.value.position!=e.value.position){let t=s.stepEdits.find(r=>r.id==i.step.id);(!t||t.body!=n.value.body&&t.position!=n.value.position)&&s.stepEdits.push(n.value)}i.editing==!1&&s.stepEdits.length&&(e.value=C({},n.value))}),$e(()=>{if(i.editing){const t=document.getElementById(`bodyText-${i.step.id}`);t.style.height=t.scrollHeight+"px"}}),{activeData:n,account:y(()=>s.account),async deleteStep(){try{this.account.id==i.step.creatorId&&await B.deleteStep(i.step.id)}catch(t){h.error(t),w.toast(t.message,"error")}}}}},pi={key:0,class:"d-flex stepText"},gi={key:1,class:"me-3"},mi=["id"],fi={key:3},hi={class:"on-hover"},yi={key:1,class:"d-flex stepText"},bi={class:"me-3"};function wi(i,e,n,t,r,c){return l(),d("div",null,[t.account.id==n.step.creatorId?(l(),d("div",pi,[n.editing?I((l(),d("input",{key:0,type:"number",style:{width:"4vw"},"onUpdate:modelValue":e[0]||(e[0]=a=>t.activeData.position=a)},null,512)),[[E,t.activeData.position,void 0,{trim:!0,lazy:!0}]]):(l(),d("span",gi,m(t.activeData.position)+".",1)),n.editing?I((l(),d("textarea",{key:2,id:"bodyText-"+n.step.id,class:"text w-100",oninput:'this.style.height=""; this.style.height = this.scrollHeight + "px"',"onUpdate:modelValue":e[1]||(e[1]=a=>t.activeData.body=a)},null,8,mi)),[[E,t.activeData.body,void 0,{trim:!0,lazy:!0}]]):(l(),d("span",fi,m(t.activeData.body),1)),o("div",hi,[n.editing?(l(),d("i",{key:0,class:"rounded-circle mdi mdi-skull selectable",onClick:e[2]||(e[2]=(...a)=>t.deleteStep&&t.deleteStep(...a))})):v("",!0)])])):(l(),d("div",yi,[o("span",bi,m(n.step.position)+".",1),o("span",null,m(n.step.body),1)]))])}var xi=R(vi,[["render",wi],["__scopeId","data-v-1c7e8248"]]),fe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:xi});function ki(i){Object.entries({"./components/Ingredient.vue":ie,"./components/Login.vue":le,"./components/Modal.vue":de,"./components/Navbar.vue":ue,"./components/Recipe.vue":ve,"./components/RecipeDetails.vue":pe,"./components/RecipeForm.vue":ge,"./components/RecipesFeed.vue":me,"./components/Step.vue":fe}).forEach(([n,t])=>{const r=t.name||n.substr(n.lastIndexOf("/")+1).replace(/\.\w+$/,"");i.component(r,t.default)})}const he=Fe(Ve);ki(he);he.use(ae).mount("#app");export{s as A,w as P,R as _,h as l,Y as r};
