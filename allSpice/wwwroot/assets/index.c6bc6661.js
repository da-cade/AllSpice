var ye=Object.defineProperty;var G=Object.getOwnPropertySymbols;var be=Object.prototype.hasOwnProperty,we=Object.prototype.propertyIsEnumerable;var J=(n,e,i)=>e in n?ye(n,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):n[e]=i,C=(n,e)=>{for(var i in e||(e={}))be.call(e,i)&&J(n,i,e[i]);if(G)for(var i of G(e))we.call(e,i)&&J(n,i,e[i]);return n};import{r as xe,c as y,a as S,o as l,b as d,d as T,e as o,S as Q,f as ke,g,w as P,h as I,v as E,t as m,i as v,j as Ie,k as Ee,l as Se,m as Re,p as q,n as M,q as De,s as V,u as X,x as Z,y as H,z as b,T as Te,F as O,A as j,K as Ae,B as N,C as Ce,D as Pe,E as $e}from"./vendor.79e61492.js";const Fe=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))t(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const a of c.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&t(a)}).observe(document,{childList:!0,subtree:!0});function i(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerpolicy&&(c.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?c.credentials="include":r.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function t(r){if(r.ep)return;r.ep=!0;const c=i(r);fetch(r.href,c)}};Fe();const s=xe({user:{},account:{},recipes:[],activeRecipe:{},ingredients:[],steps:[],favorites:[],myFavorites:[],ingEdits:[],stepEdits:[]});var R=(n,e)=>{for(const[i,t]of e)n[i]=t;return n};const Oe={name:"App",setup(){return{appState:y(()=>s)}}},qe={class:"container-fluid full-page"},Me={class:"row"},je={class:"col-12"};function Le(n,e,i,t,r,c){const a=S("Navbar"),_=S("router-view");return l(),d("main",null,[T(a),o("div",qe,[o("div",Me,[o("div",je,[T(_)])])])])}var Ve=R(Oe,[["render",Le]]);class w{static async confirm(e="Are you sure?",i="You won't be able to revert this!",t="warning",r="Yes, delete it!"){try{return!!(await Q.fire({title:e,text:i,icon:t,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:r})).isConfirmed}catch{return!1}}static toast(e="Warning!",i="warning",t="top-end",r=3e3,c=!0){Q.fire({title:e,icon:i,position:t,timer:r,timerProgressBar:c,toast:!0,showConfirmButton:!1})}static error(e){var i;if(e.isAxiosError){const{response:t}=e;this.toast(((i=t.data.error)==null?void 0:i.message)||t.data.message,"error")}else this.toast(e.message||e,"error")}static success(e="Success!"){this.toast(e,"success")}}const ee=window.location.origin.includes("localhost"),te=ee?"https://localhost:5001":"",Ne="dev-nw8rrpf8.us.auth0.com",Ue="AawJXZhjMzi3kn1PlJl0roYxpoYd74E1",ze="http://dyldev.com",p=ke.create({baseURL:te,timeout:8e3});class Be{async getIngredients(e){const i=await p.get(`api/recipes/${e}/ingredients`);s.ingredients=i.data}async makeEdits(){await s.ingEdits.forEach(async i=>{const t=await p.put(`api/ingredients/${i.id}`,i);console.log(t.data);const r=s.ingredients.findIndex(c=>c.id==i.id);s.ingredients.splice(r,1,t.data)}),s.ingEdits=[],s.ingredients=s.ingredients}async createIngredient(e){const i=await p.post("api/ingredients",e);console.log(i.data),s.ingredients.push(i.data)}async deleteIngredient(e){const i=await p.delete(`api/ingredients/${e}`);console.log(i.data),s.ingredients=s.ingredients.filter(t=>t.id!==e)}}const U=new Be;function L(n,e){if(ee)console[n](`[${n}] :: ${new Date().toLocaleTimeString()} :: `,...e);else{switch(n){case"log":case"assert":return}console[n](`[${n}] :: ${new Date().toLocaleTimeString()} :: `,...e)}}const h={log(){L("log",arguments)},error(){L("error",arguments)},warn(){L("warn",arguments)},assert(){L("assert",arguments)},trace(){L("trace",arguments)}};const He={props:{ingredient:{type:Object,required:!0},editing:{type:Boolean,required:!0}},setup(n){const e=g();e.value=C({},n.ingredient);const i=g({});return P(()=>{if(i.value.name||(console.log("empty"),i.value=C({},e.value)),i.value.name!=e.value.name||i.value.quantity!=e.value.quantity){let t=s.ingEdits.find(r=>r.id==n.ingredient.id);(!t||t.name!=i.value.name&&t.quantity!=i.value.quantity)&&s.ingEdits.push(i.value)}n.editing==!1&&s.ingEdits.length&&(e.value=C({},i.value))}),{activeData:i,account:y(()=>s.account),async deleteIngredient(){try{this.account.id==n.ingredient.creatorId&&await U.deleteIngredient(n.ingredient.id)}catch(t){h.error(t),w.toast(t.message,"error")}}}}},Ke={key:0,class:"d-flex ingredientText"},Ye={key:1,class:"w-25"},We={key:3,class:"ms-3"},Ge={class:"on-hover"},Je={key:1,class:"d-flex ingredientText"},Qe={class:"ms-3"};function Xe(n,e,i,t,r,c){return l(),d("div",null,[t.account.id==i.ingredient.creatorId?(l(),d("div",Ke,[i.editing?I((l(),d("input",{key:0,type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>t.activeData.name=a)},null,512)),[[E,t.activeData.name,void 0,{trim:!0,lazy:!0}]]):(l(),d("span",Ye,m(t.activeData.name),1)),i.editing?I((l(),d("input",{key:2,type:"text","onUpdate:modelValue":e[1]||(e[1]=a=>t.activeData.quantity=a)},null,512)),[[E,t.activeData.quantity,void 0,{trim:!0,lazy:!0}]]):(l(),d("span",We,m(t.activeData.quantity),1)),o("div",Ge,[i.editing?(l(),d("i",{key:0,class:"rounded-circle mdi mdi-skull selectable",onClick:e[2]||(e[2]=(...a)=>t.deleteIngredient&&t.deleteIngredient(...a))})):v("",!0)])])):(l(),d("div",Je,[o("span",null,m(i.ingredient.name),1),o("span",Qe,m(i.ingredient.quantity),1)]))])}var ie=R(He,[["render",Xe],["__scopeId","data-v-bb50a75c"]]),ne=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ie});const Ze="modulepreload",oe={},et="/",k=function(e,i){return!i||i.length===0?e():Promise.all(i.map(t=>{if(t=`${et}${t}`,t in oe)return;oe[t]=!0;const r=t.endsWith(".css"),c=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${t}"]${c}`))return;const a=document.createElement("link");if(a.rel=r?"stylesheet":Ze,r||(a.as="script",a.crossOrigin=""),a.href=t,document.head.appendChild(a),r)return new Promise((_,u)=>{a.addEventListener("load",_),a.addEventListener("error",u)})})).then(()=>e())};function tt(n){switch(n){case"./components/Ingredient.vue":return k(()=>Promise.resolve().then(function(){return ne}),void 0);case"./components/Login.vue":return k(()=>Promise.resolve().then(function(){return le}),void 0);case"./components/Modal.vue":return k(()=>Promise.resolve().then(function(){return de}),void 0);case"./components/Navbar.vue":return k(()=>Promise.resolve().then(function(){return ue}),void 0);case"./components/Recipe.vue":return k(()=>Promise.resolve().then(function(){return ve}),void 0);case"./components/RecipeDetails.vue":return k(()=>Promise.resolve().then(function(){return pe}),void 0);case"./components/RecipeForm.vue":return k(()=>Promise.resolve().then(function(){return ge}),void 0);case"./components/RecipesFeed.vue":return k(()=>Promise.resolve().then(function(){return me}),void 0);case"./components/Step.vue":return k(()=>Promise.resolve().then(function(){return fe}),void 0);default:return new Promise(function(e,i){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(i.bind(null,new Error("Unknown variable dynamic import: "+n)))})}}function it(n){switch(n){case"./pages/AboutPage.vue":return k(()=>import("./AboutPage.4a12a210.js"),["assets/AboutPage.4a12a210.js","assets/vendor.79e61492.js"]);case"./pages/AccountPage.vue":return k(()=>import("./AccountPage.02eca523.js"),["assets/AccountPage.02eca523.js","assets/AccountPage.1d38451d.css","assets/vendor.79e61492.js"]);case"./pages/HomePage.vue":return k(()=>import("./HomePage.774b5570.js"),["assets/HomePage.774b5570.js","assets/HomePage.5e3edf20.css","assets/vendor.79e61492.js"]);default:return new Promise(function(e,i){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(i.bind(null,new Error("Unknown variable dynamic import: "+n)))})}}function K(n){return()=>it(`./pages/${n}.vue`)}function se(n){return()=>tt(`./components/${n}.vue`)}const nt=[{path:"/",name:"Home",component:K("HomePage"),children:[{path:"/recipes",name:"AllRecipes",component:se("RecipesFeed"),meta:{showModal:!1}},{path:"/recipes/:recipeId/details",name:"RecipeDetails",component:se("RecipeDetails"),props:!0,meta:{showModal:!0}}]},{path:"/newRecipe",name:"New Recipe",component:K("RecipeForm")},{path:"/account",name:"Account",component:K("AccountPage"),beforeEnter:Se}],ae=Ie({linkActiveClass:"router-link-active",linkExactActiveClass:"router-link-exact-active",history:Ee(),routes:nt});class ot{async getAccount(){try{const e=await p.get("/account");s.account=e.data}catch(e){h.error("HAVE YOU STARTED YOUR SERVER YET???",e)}}}const st=new ot;class at{async getMyFavorites(){const e=await p.get("account/favorites");s.myFavorites=e.data}async getFavoritesByRecipe(e){const i=await p.get(`api/recipes/${e}/favorites`);s.favorites=s.favorites.concat(i.data)}async addFavorite(e){const i=await p.post("api/favorites",e);s.favorites.push(i.data),s.myFavorites.push(i.data)}async removeFavorite(e){const i=await p.delete("api/favorites/"+e);return s.favorites=s.favorites.filter(t=>t.id!==e),s.myFavorites=s.favorites.filter(t=>t.id!==e),i.data}}const $=new at,rt={connection:"connection",connected:"connected",disconnect:"disconnect",authenticate:"authenticate",authenticated:"authenticated",userConnected:"userConnected",userDisconnected:"userDisconnected",error:"error"};class ct{constructor(e=!1,i=te){}on(e,i){var t;return(t=this.socket)==null||t.on(e,i.bind(this)),this}onConnected(e){h.log("[SOCKET_CONNECTION]",e),this.connected=!0,this.playback()}onAuthenticated(e){h.log("[SOCKET_AUTHENTICATED]",e),this.authenticated=!0,this.playback()}authenticate(e){var i;(i=this.socket)==null||i.emit(rt.authenticate,e)}onError(e){h.error("[SOCKET_ERROR]",e)}enqueue(e,i){h.log("[ENQUEING_ACTION]",{action:e,payload:i}),this.queue.push({action:e,payload:i})}playback(){h.log("[SOCKET_PLAYBACK]");const e=[...this.queue];this.queue=[],e.forEach(i=>{this.emit(i.action,i.payload)})}emit(e,i=void 0){if(this.requiresAuth&&!this.authenticated)return this.enqueue(e,i);if(!this.connected)return this.enqueue(e,i);this.socket.emit(e,i)}}class lt extends ct{constructor(){super();this.on("error",this.onError)}onError(e){w.toast(e.message,"error")}}const re=new lt,x=Re({domain:Ne,clientId:Ue,audience:ze,useRefreshTokens:!0,onRedirectCallback:n=>{ae.push(n&&n.targetUrl?n.targetUrl:window.location.pathname)}});x.on(x.AUTH_EVENTS.AUTHENTICATED,async function(){p.defaults.headers.authorization=x.bearer,p.interceptors.request.use(dt),s.user=x.user,await st.getAccount(),re.authenticate(x.bearer),await $.getMyFavorites()});async function dt(n){if(!x.isAuthenticated)return n;const e=x.identity.exp*1e3,i=e<Date.now(),t=e<Date.now()+1e3*60*60*12;return i?await x.loginWithPopup():t&&(await x.getTokenSilently(),p.defaults.headers.authorization=x.bearer,re.authenticate(x.bearer)),n}const ut={setup(){return{user:y(()=>s.user),account:y(()=>s.account),async login(){x.loginWithPopup()},async logout(){x.logout({returnTo:window.location.origin})}}}},ce=n=>(q("data-v-59ce884d"),n=n(),M(),n),_t={class:"navbar-text"},vt=ce(()=>o("i",{class:"mdi mdi-logout"},null,-1)),pt=[vt],gt=ce(()=>o("i",{class:"mdi mdi-logout"},null,-1)),mt=[gt];function ft(n,e,i,t,r,c){return l(),d("span",_t,[t.user.isAuthenticated?(l(),d("div",{key:1,class:"hoverable text-danger",onClick:e[1]||(e[1]=(...a)=>t.logout&&t.logout(...a))},mt)):(l(),d("div",{key:0,class:"hoverable text-success",onClick:e[0]||(e[0]=(...a)=>t.login&&t.login(...a))},pt))])}var ht=R(ut,[["render",ft],["__scopeId","data-v-59ce884d"]]),le=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ht});const yt={setup(){return{}}},bt={class:"myModal d-flex justify-content-center"},wt={class:"modalContainer d-flex flex-column bg-light rounded"};function xt(n,e,i,t,r,c){return l(),d("div",bt,[o("div",wt,[De(n.$slots,"modal-content-slot",{},void 0,!0)])])}var kt=R(yt,[["render",xt],["__scopeId","data-v-130b82c8"]]),de=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:kt});const It={setup(){return{}}},z=n=>(q("data-v-e18d2a5c"),n=n(),M(),n),Et={class:"w-100 d-flex justify-content-between bg-light align-items-start"},St=z(()=>o("div",null,[o("img",{class:"headline",src:"https://i.imgur.com/uD2hJ1s.png",alt:""})],-1)),Rt={class:"myNav bg-dark px-3 d-flex align-items-center"},Dt=z(()=>o("div",{class:"hoverable me-3"},[o("i",{class:"mdi mdi-home"})],-1)),Tt=z(()=>o("div",{class:"hoverable me-3"},[o("i",{class:"mdi mdi-countertop"})],-1)),At={style:{position:"relative"},class:"me-3"},Ct=z(()=>o("button",{class:"mdi mdi-plus",type:"button",id:"dropdownMenuButton","data-bs-toggle":"dropdown","data-bs-auto-close":"true","aria-expanded":"false"},null,-1)),Pt={id:"dropdown-menu",class:"dropdown-menu formSize"};function $t(n,e,i,t,r,c){const a=S("router-link"),_=S("RecipeForm"),u=S("Login");return l(),d("div",Et,[St,o("div",Rt,[T(a,{to:{name:"Home"}},{default:V(()=>[Dt]),_:1}),T(a,{to:{name:"Account"}},{default:V(()=>[Tt]),_:1}),o("div",At,[Ct,o("div",Pt,[T(_)])]),T(u)])])}var Ft=R(It,[["render",$t],["__scopeId","data-v-e18d2a5c"]]),ue=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Ft});class Ot{async getAllRecipes(){const e=await p.get("api/recipes");s.recipes=e.data}async createRecipe(e){const i=await p.post("api/recipes",e);console.log(i.data),s.recipes.unshift(i.data)}async deleteRecipe(e){const i=await p.delete(`api/recipes/${e}`);console.log(i.data),s.recipes=s.recipes.filter(t=>t.id!==e)}}const Y=new Ot;const qt={props:{recipe:{type:Object,required:!0}},setup(n){const e=X(),i=Z();H(async()=>{try{await $.getFavoritesByRecipe(n.recipe.id)}catch(c){h.error(c),w.toast(c.message,"error")}});let t=g(!1);P(()=>{if(s.recipes.length&&s.favorites.length){const c=s.favorites.find(a=>a.recipeId==n.recipe.id&&a.accountId==s.account.id);c&&(t.value=!0),c||(t.value=!1)}});let r=g();return P(()=>{e.params.recipeId==n.recipe.id&&(r.value=e.meta.showModal),e.name=="Home"&&(r.value=!1,s.activeRecipe={},s.ingredients=[],s.steps=[])}),{props:n,router:i,favorited:t,showModal:r,authenticated:y(()=>s.account.id==n.recipe.creatorId),account:y(()=>s.account),goToDetails(){try{i.push({name:"RecipeDetails",params:{recipeId:n.recipe.id}})}catch(c){h.error(c),w.toast(c.message,"error")}},async deleteRecipe(){try{await w.confirm()&&await Y.deleteRecipe(n.recipe.id)}catch(c){h.error(c),w.toast(c.message,"error")}},async toggleFavorite(){const c=s.favorites.find(a=>a.recipeId==n.recipe.id&&a.accountId==s.account.id);if(!c)await $.addFavorite({recipeId:n.recipe.id});else{const a=await $.removeFavorite(c.id);w.toast(a,"success","top-end",2e3,!1)}}}}},_e=n=>(q("data-v-e3fdca06"),n=n(),M(),n),Mt={class:"col-md-6"},jt=["src","alt"],Lt={class:"spiceContent d-flex flex-column p-3"},Vt={class:"mt-auto"},Nt=_e(()=>o("hr",null,null,-1)),Ut={class:"d-flex justify-content-between"},zt={class:"w-50 spiceInfo d-flex justify-content-end align-items-center"},Bt={class:"me-2"},Ht={key:0,class:"me-2"},Kt=_e(()=>o("div",{class:"d-flex justify-content-between mb-1"},null,-1));function Yt(n,e,i,t,r,c){const a=S("router-view"),_=S("Modal");return l(),d(O,null,[o("div",Mt,[o("div",{class:"spicebox d-flex flex-column rounded my-4",onClick:e[3]||(e[3]=b(u=>t.goToDetails(),["stop"]))},[o("img",{src:i.recipe.picture,alt:i.recipe.title,class:"spicePic rounded-top"},null,8,jt),o("div",Lt,[o("h5",null,m(i.recipe.title),1),o("h6",null,m(i.recipe.subtitle),1),o("div",Vt,[Nt,o("div",Ut,[o("span",null,m(i.recipe.creator.name),1),o("div",zt,[o("span",Bt,m(i.recipe.category),1),t.account.id?(l(),d("div",Ht,[t.favorited?(l(),d("i",{key:0,class:"mdi mdi-heart selectable",style:{color:"rgb(191, 17, 17)"},onClick:e[0]||(e[0]=b((...u)=>t.toggleFavorite&&t.toggleFavorite(...u),["stop"]))})):v("",!0),t.favorited?v("",!0):(l(),d("i",{key:1,class:"mdi mdi-heart-outline selectable",onClick:e[1]||(e[1]=b((...u)=>t.toggleFavorite&&t.toggleFavorite(...u),["stop"]))}))])):v("",!0),t.authenticated?(l(),d("i",{key:1,class:"mdi mdi-delete selectable",onClick:e[2]||(e[2]=b((...u)=>t.deleteRecipe&&t.deleteRecipe(...u),["stop"]))})):v("",!0)]),Kt])])])])]),T(Te,{name:"modalFade"},{default:V(()=>[(l(),j(Ae,null,[t.showModal?(l(),j(_,{key:0},{"modal-content-slot":V(()=>[T(a,{recipe:i.recipe},null,8,["recipe"])]),_:1})):v("",!0)],1024))]),_:1})],64)}var Wt=R(qt,[["render",Yt],["__scopeId","data-v-e3fdca06"]]),ve=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Wt});class Gt{async getSteps(e){let t=(await p.get(`api/recipes/${e}/steps`)).data.sort((r,c)=>r.position-c.position);s.steps=t}async makeEdits(){await s.stepEdits.forEach(async i=>{const t=await p.put(`api/steps/${i.id}`,i);console.log(t.data);const r=s.steps.findIndex(c=>c.id==i.id);s.steps.splice(r,1,t.data)}),s.stepEdits=[],s.steps=s.steps}async createStep(e){const i=await p.post("api/steps",e);console.log(i.data),s.steps.push(i.data)}async deleteStep(e){const i=await p.delete(`api/steps/${e}`);console.log(i.data),s.steps=s.steps.filter(t=>t.id!==e)}}const B=new Gt;const Jt={components:{Ingredient:ie},inheritAttrs:!1,name:"RecipeDetails",props:{recipe:{type:Object,required:!0}},setup(n){const e=X(),i=Z(),t=g(!1),r=g(!1),c=g(!1),a=g(!1),_=g(!1),u=g({}),F=g({});return P(()=>{const f=s.favorites.find(A=>A.accountId==s.account.id&&A.accountId==s.account.id);f&&(_.value=!0),f||(_.value=!1)}),H(async()=>{await $.getFavoritesByRecipe(e.params.recipeId),await U.getIngredients(e.params.recipeId),await B.getSteps(e.params.recipeId),a.value=!0}),{props:n,route:e,router:i,loaded:a,editing:t,creatingIng:r,creatingStep:c,stepData:u,ingData:F,favorited:_,ingredients:y(()=>s.ingredients),steps:y(()=>s.steps),account:y(()=>s.account),authenticated:y(()=>s.account.id==n.recipe.creatorId),closeModal(){try{i.go(-1)}catch{i.push({name:"Home"})}},async toggleFavorite(){const f=s.favorites.find(A=>A.recipeId==n.recipe.id&&A.accountId==s.account.id);if(!f)await $.addFavorite({recipeId:n.recipe.id});else{const A=await $.removeFavorite(f.id);w.toast(A,"success","top-end",2e3,!1)}},async handleEdit(){t.value=!t.value;try{if(!s.stepEdits.length&&!s.ingEdits.length)return;t.value==!1&&s.ingEdits.length&&await U.makeEdits(),t.value==!1&&s.stepEdits.length&&await B.makeEdits()}catch(f){h.error(f),w.toast(f.message,"error")}},async newStep(){try{u.value.recipeId=e.params.recipeId,u.value.creatorId=this.account.id,console.log(u.value),await B.createStep(u.value),u.value={}}catch(f){h.error(f),w.toast(f.message,"error")}},async newIngredient(){try{F.value.recipeId=e.params.recipeId,F.value.creatorId=this.account.id,console.log(F.value),await U.createIngredient(F.value),F.value={}}catch(f){h.error(f),w.toast(f.message,"error")}}}}},D=n=>(q("data-v-bf96bb30"),n=n(),M(),n),Qt={class:"coverImg rounded-top"},Xt={class:"buttonBox d-flex flex-column align-items-center"},Zt={class:"body bg-light"},ei={class:"d-flex justify-content-between"},ti={class:"w-65 p-4"},ii=D(()=>o("hr",{class:"w-35"},null,-1)),ni={class:"d-flex w-35 p-4"},oi={class:"ms-auto"},si={class:"container-fluid"},ai={class:"row"},ri=D(()=>o("div",{class:"col-12"},[o("div",{class:"whitespacer"})],-1)),ci={class:"col-12 d-flex justify-content-end"},li={class:"d-flex lighten rounded-circle p-1"},di=D(()=>o("hr",null,null,-1)),ui={class:"row"},_i={class:"col-md-5 bg-myLitePink"},vi={class:"bg-light rounded p-2 my-3"},pi=D(()=>o("h4",null,"Ingredients",-1)),gi={id:"newIngredient",class:"d-flex"},mi=D(()=>o("label",{for:""},null,-1)),fi=D(()=>o("label",{for:""},null,-1)),hi={key:2,type:"submit",style:{display:"none"}},yi={class:"col-md-5 bg-myLitePink"},bi={class:"bg-light rounded p-2 my-3"},wi=D(()=>o("h4",null,"Steps",-1)),xi={id:"newStep",class:"d-flex"},ki=D(()=>o("label",{for:""},null,-1)),Ii=D(()=>o("label",{for:""},null,-1)),Ei={key:2,type:"submit",style:{display:"none"}},Si=D(()=>o("div",{class:"row"},[o("div",{class:"col-12"},[o("div",{class:"whitespacer"})])],-1));function Ri(n,e,i,t,r,c){const a=S("Ingredient"),_=S("Step");return l(),d("div",{class:"detailsContent rounded",style:Ce({"background-image":`url(${i.recipe.picture})`})},[o("div",Qt,[o("div",Xt,[o("i",{id:"close",class:"mdi mdi-close selectable text-center rounded-circle mb-2",onClick:e[0]||(e[0]=b((...u)=>t.closeModal&&t.closeModal(...u),["stop"]))}),t.favorited?(l(),d("i",{key:0,class:"fav mdi mdi-heart selectable",onClick:e[1]||(e[1]=b((...u)=>t.toggleFavorite&&t.toggleFavorite(...u),["stop"]))})):v("",!0),!t.favorited&&t.account.id?(l(),d("i",{key:1,class:"fav mdi mdi-heart-outline selectable",onClick:e[2]||(e[2]=b((...u)=>t.toggleFavorite&&t.toggleFavorite(...u),["stop"]))})):v("",!0)])]),o("div",Zt,[o("div",ei,[o("div",ti,[o("h1",null,m(i.recipe.title),1),ii,o("h4",null,m(i.recipe.subtitle),1)]),o("div",ni,[o("h5",oi,m(i.recipe.category),1)])])]),o("div",si,[o("div",ai,[ri,o("div",ci,[o("div",li,[t.authenticated?(l(),d("i",{key:0,class:"mdi mdi-pencil selectable rounded-circle p-1",onClick:e[3]||(e[3]=b((...u)=>t.handleEdit&&t.handleEdit(...u),["stop"]))})):v("",!0)])])]),di,o("div",ui,[o("div",_i,[o("div",vi,[pi,(l(!0),d(O,null,N(t.ingredients,u=>(l(),j(a,{class:"",key:u.id,ingredient:u,editing:t.editing},null,8,["ingredient","editing"]))),128)),t.editing?(l(),d("i",{key:0,class:"mdi mdi-plus bg-danger rounded-circle selectable",onClick:e[4]||(e[4]=b(u=>t.creatingIng=!t.creatingIng,["stop"]))})):v("",!0),o("form",{onSubmit:e[7]||(e[7]=b(u=>t.newIngredient(),["prevent"]))},[o("div",gi,[mi,t.creatingIng&&t.editing?I((l(),d("input",{key:0,type:"text","onUpdate:modelValue":e[5]||(e[5]=u=>t.ingData.name=u),required:""},null,512)),[[E,t.ingData.name]]):v("",!0),fi,t.creatingIng&&t.editing?I((l(),d("input",{key:1,type:"text",style:{width:"5vw"},"onUpdate:modelValue":e[6]||(e[6]=u=>t.ingData.quantity=u),required:""},null,512)),[[E,t.ingData.quantity]]):v("",!0),t.creatingIng&&t.editing?(l(),d("button",hi)):v("",!0)])],32)])]),o("div",yi,[o("div",bi,[wi,(l(!0),d(O,null,N(t.steps,u=>(l(),j(_,{class:"",key:u.id,step:u,editing:t.editing},null,8,["step","editing"]))),128)),t.editing?(l(),d("i",{key:0,class:"mdi mdi-plus bg-danger rounded-circle h-25 selectable",onClick:e[8]||(e[8]=b(u=>t.creatingStep=!t.creatingStep,["stop"]))})):v("",!0),o("form",{onSubmit:e[11]||(e[11]=b(u=>t.newStep(),["prevent"]))},[o("div",xi,[ki,t.creatingStep&&t.editing?I((l(),d("input",{key:0,type:"number",min:"0",style:{width:"3vw"},"onUpdate:modelValue":e[9]||(e[9]=u=>t.stepData.position=u),required:""},null,512)),[[E,t.stepData.position,void 0,{trim:!0}]]):v("",!0),Ii,t.creatingStep&&t.editing?I((l(),d("textarea",{key:1,class:"w-100","onUpdate:modelValue":e[10]||(e[10]=u=>t.stepData.body=u),required:""},null,512)),[[E,t.stepData.body,void 0,{trim:!0}]]):v("",!0),t.creatingStep&&t.editing?(l(),d("button",Ei)):v("",!0)])],32)])])]),Si])],4)}var Di=R(Jt,[["render",Ri],["__scopeId","data-v-bf96bb30"]]),pe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Di});const Ti={setup(){const n=g({});H(async()=>{await Y.getAllRecipes()});let e=g([]);return P(()=>{if(s.recipes.length){let i=[];s.recipes.forEach(t=>{i.includes(t.category)||i.push(t.category)}),i.sort(),e.value=i}}),{formData:n,categories:e,async createRecipe(){try{if(!n.value.category)throw new Error("You have to choose a category");await Y.createRecipe(n.value),n.value={}}catch(i){h.error(i),w.toast(i.message,"error")}}}}},Ai={class:"recipeForm"},Ci={class:"container-fluid"},Pi={class:"row"},$i={class:"col-md-6"},Fi=o("label",{for:"recipe-title"},"Title: ",-1),Oi={class:"col-md-6"},qi=o("label",{for:"recipe-img"},"Image: ",-1),Mi={class:"row d-flex align-items-end"},ji={class:"col-md-6"},Li=o("label",{for:"recipe-subtitle"},"Subtitle: ",-1),Vi={class:"col-md-6 d-flex justify-content-center"},Ni={class:"btn-group-vertical w-100",role:"group","aria-label":""},Ui={class:"btn-group",role:"group"},zi={id:"dropdownId",type:"button",class:"btn btn-light dropdown-toggle","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},Bi={class:"dropdown-menu","aria-labelledby":"dropdownId"},Hi=["onClick"],Ki=o("hr",null,null,-1),Yi={class:"row"},Wi={class:"col-12"},Gi={class:"w-100 d-flex justify-content-start"},Ji=o("button",{class:"btn btn-info me-2",type:"submit"},"Submit",-1);function Qi(n,e,i,t,r,c){return l(),d("div",Ai,[o("form",{onSubmit:e[4]||(e[4]=b(a=>t.createRecipe(),["prevent"]))},[o("div",Ci,[o("div",Pi,[o("div",$i,[Fi,I(o("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>t.formData.title=a),name:"recipe-title",id:"",required:"",maxlength:"50"},null,512),[[E,t.formData.title]])]),o("div",Oi,[qi,I(o("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=a=>t.formData.picture=a),name:"recipe-img",id:"",required:""},null,512),[[E,t.formData.picture]])])]),o("div",Mi,[o("div",ji,[Li,I(o("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=a=>t.formData.subtitle=a),name:"recipe-subtitle",id:"",required:"",maxlength:"255"},null,512),[[E,t.formData.subtitle]])]),o("div",Vi,[o("div",Ni,[o("div",Ui,[o("button",zi,m(t.formData.category?t.formData.category:"Category"),1),o("div",Bi,[(l(!0),d(O,null,N(t.categories,a=>(l(),d("a",{key:a,class:"dropdown-item selectable",onClick:_=>t.formData.category=a},m(a),9,Hi))),128))])])])])]),Ki,o("div",Yi,[o("div",Wi,[o("div",Gi,[Ji,o("button",{class:"btn btn-light",onClick:e[3]||(e[3]=a=>t.formData={})}," Close ")])])])])],32)])}var Xi=R(Ti,[["render",Qi]]),ge=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Xi});const Zi={setup(){const n=g(""),e=g([]);return P(()=>{let i=s.recipes;if(n.value&&s.myFavorites.length){if(n.value=="favorited"){let t=s.myFavorites,r=[];t.forEach(c=>{c.recipe.creator=s.account,r.push(c.recipe)}),i=r}n.value=="mine"&&(i=i.filter(t=>t.creatorId==s.account.id))}e.value=i}),{filter:n,filteredRecipes:e,recipes:y(()=>s.recipes),account:y(()=>s.account)}}},W=n=>(q("data-v-00ee1d1a"),n=n(),M(),n),en={class:"row d-flex justify-content-end"},tn={class:"col-4"},nn={key:0,class:"filterbar d-flex justify-content-around align-items-center rounded"},on=W(()=>o("h6",null,"Favorited",-1)),sn=[on],an=W(()=>o("h6",{class:""},"My Recipes",-1)),rn=[an],cn=W(()=>o("h6",null,"All",-1)),ln=[cn],dn={class:"row"};function un(n,e,i,t,r,c){const a=S("Recipe");return l(),d(O,null,[o("div",en,[o("div",tn,[t.account.id?(l(),d("div",nn,[o("div",{class:"p-2 d-flex align-items-center justify-content-center selectable text-center filter",onClick:e[0]||(e[0]=_=>t.filter="favorited")},sn),o("div",{class:"p-2 d-flex align-items-center justify-content-center selectable text-center filter",onClick:e[1]||(e[1]=_=>t.filter="mine")},rn),o("div",{class:"p-2 d-flex align-items-center justify-content-center selectable text-center filter",onClick:e[2]||(e[2]=_=>t.filter="")},ln)])):v("",!0)])]),o("div",dn,[(l(!0),d(O,null,N(t.filteredRecipes,_=>(l(),j(a,{key:_.id,recipe:_},null,8,["recipe"]))),128))])],64)}var _n=R(Zi,[["render",un],["__scopeId","data-v-00ee1d1a"]]),me=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:_n});const vn={props:{step:{type:Object,required:!0},editing:{type:Boolean,required:!0}},setup(n){const e=g();e.value=C({},n.step);const i=g({});return P(()=>{if(i.value.body||(i.value=C({},e.value)),i.value.body!=e.value.body||i.value.position!=e.value.position){let t=s.stepEdits.find(r=>r.id==n.step.id);(!t||t.body!=i.value.body&&t.position!=i.value.position)&&s.stepEdits.push(i.value)}n.editing==!1&&s.stepEdits.length&&(e.value=C({},i.value))}),Pe(()=>{if(n.editing){const t=document.getElementById(`bodyText-${n.step.id}`);t.style.height=t.scrollHeight+"px"}}),{activeData:i,account:y(()=>s.account),async deleteStep(){try{this.account.id==n.step.creatorId&&await B.deleteStep(n.step.id)}catch(t){h.error(t),w.toast(t.message,"error")}}}}},pn={key:0,class:"d-flex stepText"},gn={key:1,class:"me-3"},mn=["id"],fn={key:3},hn={class:"on-hover"},yn={key:1,class:"d-flex stepText"},bn={class:"me-3"};function wn(n,e,i,t,r,c){return l(),d("div",null,[t.account.id==i.step.creatorId?(l(),d("div",pn,[i.editing?I((l(),d("input",{key:0,type:"number",style:{width:"4vw"},"onUpdate:modelValue":e[0]||(e[0]=a=>t.activeData.position=a)},null,512)),[[E,t.activeData.position,void 0,{trim:!0,lazy:!0}]]):(l(),d("span",gn,m(t.activeData.position)+".",1)),i.editing?I((l(),d("textarea",{key:2,id:"bodyText-"+i.step.id,class:"text w-100",oninput:'this.style.height=""; this.style.height = this.scrollHeight + "px"',"onUpdate:modelValue":e[1]||(e[1]=a=>t.activeData.body=a)},null,8,mn)),[[E,t.activeData.body,void 0,{trim:!0,lazy:!0}]]):(l(),d("span",fn,m(t.activeData.body),1)),o("div",hn,[i.editing?(l(),d("i",{key:0,class:"rounded-circle mdi mdi-skull selectable",onClick:e[2]||(e[2]=(...a)=>t.deleteStep&&t.deleteStep(...a))})):v("",!0)])])):(l(),d("div",yn,[o("span",bn,m(i.step.position)+".",1),o("span",null,m(i.step.body),1)]))])}var xn=R(vn,[["render",wn],["__scopeId","data-v-1c7e8248"]]),fe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:xn});function kn(n){Object.entries({"./components/Ingredient.vue":ne,"./components/Login.vue":le,"./components/Modal.vue":de,"./components/Navbar.vue":ue,"./components/Recipe.vue":ve,"./components/RecipeDetails.vue":pe,"./components/RecipeForm.vue":ge,"./components/RecipesFeed.vue":me,"./components/Step.vue":fe}).forEach(([i,t])=>{const r=t.name||i.substr(i.lastIndexOf("/")+1).replace(/\.\w+$/,"");n.component(r,t.default)})}const he=$e(Ve);kn(he);he.use(ae).mount("#app");export{s as A,w as P,R as _,h as l,Y as r};
